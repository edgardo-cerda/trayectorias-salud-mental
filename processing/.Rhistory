var = vars,
...,
weights = .data$ponderador02_w01)
dist <- TraMineR::seqdist(seq,
method = "LCS",
with.missing = MISSING)
ward <- cluster::agnes(dist, diss = TRUE, method = 'ward')
TraMineR::seqIplot(seq, group = stats::cutree(ward, k = K),
border = NA,
space = 0, idxs = 0, xtlab = olas)
TraMineR::seqdplot(seq, group = stats::cutree(ward, k = K),
border = NA,
space = 0)
}
trayectoria(elsoc_salud_modelo,
vars = c('sobrecarga_deuda_w01', 'sobrecarga_deuda_w03', 'sobrecarga_deuda_w05'),
olas = c(2016, 2018, 2021),
MISSING = FALSE,
cpal = c('palevioletred3', 'palegreen3', 'khaki3'),
K = 5)
trayectoria(elsoc_salud_modelo,
vars = c('sobrecarga_deuda_w01', 'sobrecarga_deuda_w03', 'sobrecarga_deuda_w05'),
olas = c(2016, 2018, 2021),
cpal = c('palevioletred3', 'palegreen3', 'khaki3'),
K = 5)
# Agregar trayectoria de 3 clusters
seq <- TraMineR::seqdef(elsoc_salud_modelo,
var = c('sobrecarga_deuda_w01', 'sobrecarga_deuda_w03', 'sobrecarga_deuda_w05'),
weights = elsoc_salud_modelo$ponderador02_w01)
dist <- TraMineR::seqdist(seq,
method = "LCS",
with.missing = TRUE)
ward <- cluster::agnes(dist, diss = TRUE, method = 'ward')
elsoc_salud_modelo$trayectoria_deuda <- factor(stats::cutree(ward, k = 5),
levels = c(4, 3, 5, 2, 1),
labels = c('Nada sobrecargados', 'Nada-Algo sobrecargados',
'No muy o algo sobrecargados', 'Bastante sobrecargados, aliviados 2021', 'Muy sobrecargados'))
lookfor('c18_11')
describe_elsoc('c18_11')
elsoc_salud_modelo <- elsoc_salud_modelo %>%
filter(!elsoc::is_nsnr(m30_w01, m30_w02, m30_w03, m30_w04, m30b_w05)) %>%
mutate(
# Variables de ingreso:
m30_w01 = 1000*as.numeric(car::recode(m30_w01, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w01_imp = ifelse(is_nsnr(m29_w01), m30_w01, m29_w01),
ypc_w01 = m29_w01_imp / nhogar1_w01,
m30_w02 = 1000*as.numeric(car::recode(m30_w02, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w02_imp = ifelse(is_nsnr(m29_w02), m30_w02, m29_w02),
ypc_w02 = m29_w02_imp / nhogar1_w01,
m30_w03 = 1000*as.numeric(car::recode(m30_w03, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w03_imp = ifelse(is_nsnr(m29_w03), m30_w03, m29_w03),
ypc_w03 = m29_w03_imp / ifelse(is_nsnr(m54_w03), NA, m54_w03),
m30_w04 = 1000*as.numeric(car::recode(m30_w04, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w04_imp = ifelse(is_nsnr(m29_w04), m30_w04, m29_w04),
ypc_w04 = m29_w04_imp / ifelse(is_nsnr(m54_w04), NA, m54_w04),
m30b_w05 = 1000*as.numeric(car::recode(m30b_w05, "1 = 225; 2 = 575; 3 = 850; 4 = 1250; 5 = 1750; NA = NA")),
m29_w05_imp = ifelse(is_nsnr(m29_w05), m30b_w05, m29_w05),
ypc_w05 = m29_w05_imp / ifelse(is_nsnr(m54_w05), NA, m54_w05),
log_ing = log((ypc_w01 + ypc_w02 + ypc_w03 + ypc_w04 + ypc_w05)/5),
quintil_w01 = statar::xtile(ypc_w01, n = 5, wt = ponderador02_w01),
quintil_w01 = factor(quintil_w01,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w02 = statar::xtile(ypc_w02, n = 5, wt = ponderador02_w02),
quintil_w02 = factor(quintil_w02,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w03 = statar::xtile(ypc_w03, n = 5, wt = ponderador02_w03),
quintil_w03 = factor(quintil_w03,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w04 = statar::xtile(ypc_w04, n = 5, wt = ponderador02_w04),
quintil_w04 = factor(quintil_w04,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w05 = statar::xtile(ypc_w05, n = 5, wt = ponderador02_w05),
quintil_w05 = factor(quintil_w05,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
# Situación ocupacional:
ocup_w01 = factor(car::recode(m02_w01, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w02 = factor(car::recode(m02_w02, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w03 = factor(car::recode(m02_w03, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w04 = factor(car::recode(m02_w04, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w05 = factor(car::recode(m02_w05, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup2_w01 = factor(car::recode(m02_w01, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w02 = factor(car::recode(m02_w02, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w03 = factor(car::recode(m02_w03, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w04 = factor(car::recode(m02_w04, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w05 = factor(car::recode(m02_w05, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
# Insatisfacción con el ingreso
insatisf_ing_w01 = factor(m16_w01 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w02 = factor(m16_w02 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w03 = factor(m16_w03 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w04 = factor(m16_w04 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w05 = factor(m16_w05 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
# Sobrecarga de deudas
sobrecarga_deuda_w01 = factor(car::recode(m43_w01, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
sobrecarga_deuda_w03 = factor(car::recode(m43_w03, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
sobrecarga_deuda_w05 = factor(car::recode(m43_w05, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
# Apoyo social
apoyo_social_w01 = factor(s12_w01 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
apoyo_social_w03 = factor(s12_w03 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
apoyo_social_w05 = factor(s12_w05 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
# Actividad física regular
activ_fisica_w01 = factor(s04_w01 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
activ_fisica_w03 = factor(s04_w03 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
activ_fisica_w05 = factor(s04_w05 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
# Fumador
fuma_w01 = factor(s08_w01 >= 1,
labels = c('No fuma', 'Fumador')),
fuma_w03 = factor(s08_w03 >= 1,
labels = c('No fuma', 'Fumador')),
fuma_w05 = factor(s08_w05 >= 1,
labels = c('No fuma', 'Fumador')),
# IMC
imc_w01 = ifelse(is_nsnr(s06_w01), NA, s06_w01) / (ifelse(is_nsnr(s05_w01), NA, s05_w01/100))^2,
imc_w03 = ifelse(is_nsnr(s06_w03), NA, s06_w03) / (ifelse(is_nsnr(s05_w03), NA, s05_w03/100))^2,
imc_w05 = ifelse(is_nsnr(s06_w05), NA, s06_w05) / (ifelse(is_nsnr(s05_w03), NA, s05_w03/100))^2,
# Personalidad
s22_01_w02 = ifelse(is_nsnr(s22_01_w02), NA, s22_01_w02),
s22_02_w02 = ifelse(is_nsnr(s22_02_w02), NA, s22_02_w02),
s22_03_w02 = ifelse(is_nsnr(s22_03_w02), NA, s22_03_w02),
s22_04_w02 = ifelse(is_nsnr(s22_04_w02), NA, s22_04_w02),
s22_05_w02 = ifelse(is_nsnr(s22_05_w02), NA, s22_05_w02),
s22_06_w02 = ifelse(is_nsnr(s22_06_w02), NA, s22_06_w02),
s22_07_w02 = ifelse(is_nsnr(s22_07_w02), NA, s22_07_w02),
s22_08_w02 = ifelse(is_nsnr(s22_08_w02), NA, s22_08_w02),
s22_09_w02 = ifelse(is_nsnr(s22_09_w02), NA, s22_09_w02),
s22_10_w02 = ifelse(is_nsnr(s22_10_w02), NA, s22_10_w02),
extraversion = 6 - (s22_01_w02) + s22_06_w02 ,
agreeableness = s22_02_w02 + 6 - s22_07_w02,
conscientiousness = 6 - s22_03_w02 + s22_08_w02 ,
neuroticism = 6 - s22_04_w02 + s22_09_w02,
openness = 6 - s22_05_w02 + s22_10_w02,
# Direccion vida
proyecto_vida = factor(s30_01_w03 %in% 4:5,
labels = c('No decidido dirección de vida', 'Decidido dirección de vida')),
# Desigualdad percibida
percepcion_desigualdad_w01 = factor(c18_11_w01 %in% 4:5,
labels = c('Desigualdad muy grande', 'Desigualdad no muy grande')),
percepcion_desigualdad_w02 = factor(c18_11_w02 %in% 4:5,
labels = c('Desigualdad muy grande', 'Desigualdad no muy grande')),
percepcion_desigualdad_w03 = factor(c18_11_w03 %in% 4:5,
labels = c('Desigualdad muy grande', 'Desigualdad no muy grande')),
percepcion_desigualdad_w04 = factor(c18_11_w04 %in% 4:5,
labels = c('Desigualdad muy grande', 'Desigualdad no muy grande')),
percepcion_desigualdad_w05 = factor(c18_11_w05 %in% 4:5,
labels = c('Desigualdad muy grande', 'Desigualdad no muy grande'))
)
comparar_clusters(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'))
comparar_clusters(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'))
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 3)
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 4)
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 5)
sjmisc::frq(elsoc_long_2016_2021$c18_11)
elsoc_salud_modelo <- elsoc_salud_modelo %>%
filter(!elsoc::is_nsnr(m30_w01, m30_w02, m30_w03, m30_w04, m30b_w05)) %>%
mutate(
# Variables de ingreso:
m30_w01 = 1000*as.numeric(car::recode(m30_w01, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w01_imp = ifelse(is_nsnr(m29_w01), m30_w01, m29_w01),
ypc_w01 = m29_w01_imp / nhogar1_w01,
m30_w02 = 1000*as.numeric(car::recode(m30_w02, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w02_imp = ifelse(is_nsnr(m29_w02), m30_w02, m29_w02),
ypc_w02 = m29_w02_imp / nhogar1_w01,
m30_w03 = 1000*as.numeric(car::recode(m30_w03, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w03_imp = ifelse(is_nsnr(m29_w03), m30_w03, m29_w03),
ypc_w03 = m29_w03_imp / ifelse(is_nsnr(m54_w03), NA, m54_w03),
m30_w04 = 1000*as.numeric(car::recode(m30_w04, "1 = 220; 2 = 250; 3 = 305; 4 = 355; 5 = 400; 6 = 445; 7 = 490;
8 = 535; 9 = 585; 10 = 640; 11 = 700; 12 = 765; 13 = 845; 14 = 935;
15 = 1040; 16 = 1180; 17 = 1375; 18 = 1670; 19 = 2275; 20 = 2700; NA = NA")),
m29_w04_imp = ifelse(is_nsnr(m29_w04), m30_w04, m29_w04),
ypc_w04 = m29_w04_imp / ifelse(is_nsnr(m54_w04), NA, m54_w04),
m30b_w05 = 1000*as.numeric(car::recode(m30b_w05, "1 = 225; 2 = 575; 3 = 850; 4 = 1250; 5 = 1750; NA = NA")),
m29_w05_imp = ifelse(is_nsnr(m29_w05), m30b_w05, m29_w05),
ypc_w05 = m29_w05_imp / ifelse(is_nsnr(m54_w05), NA, m54_w05),
log_ing = log((ypc_w01 + ypc_w02 + ypc_w03 + ypc_w04 + ypc_w05)/5),
quintil_w01 = statar::xtile(ypc_w01, n = 5, wt = ponderador02_w01),
quintil_w01 = factor(quintil_w01,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w02 = statar::xtile(ypc_w02, n = 5, wt = ponderador02_w02),
quintil_w02 = factor(quintil_w02,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w03 = statar::xtile(ypc_w03, n = 5, wt = ponderador02_w03),
quintil_w03 = factor(quintil_w03,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w04 = statar::xtile(ypc_w04, n = 5, wt = ponderador02_w04),
quintil_w04 = factor(quintil_w04,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
quintil_w05 = statar::xtile(ypc_w05, n = 5, wt = ponderador02_w05),
quintil_w05 = factor(quintil_w05,
levels = 1:5,
labels = glue::glue('Quintil {1:5}')),
# Situación ocupacional:
ocup_w01 = factor(car::recode(m02_w01, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w02 = factor(car::recode(m02_w02, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w03 = factor(car::recode(m02_w03, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w04 = factor(car::recode(m02_w04, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup_w05 = factor(car::recode(m02_w05, "1:3 = 1; 6 = 2; c(4, 5, 7, 8, 9) = 3"),
levels = 1:3,
labels = c('Ocupado', 'Desempleado', 'Inactivo')),
ocup2_w01 = factor(car::recode(m02_w01, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w02 = factor(car::recode(m02_w02, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w03 = factor(car::recode(m02_w03, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w04 = factor(car::recode(m02_w04, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
ocup2_w05 = factor(car::recode(m02_w05, "1:3 = 1; 6 = 2; c(4, 5, 8, 9) = 3; 7 = 4"),
levels = 1:4,
labels = c('Ocupado', 'Desempleado', 'Inactivo', 'Trabajo no remunerado')),
# Insatisfacción con el ingreso
insatisf_ing_w01 = factor(m16_w01 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w02 = factor(m16_w02 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w03 = factor(m16_w03 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w04 = factor(m16_w04 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
insatisf_ing_w05 = factor(m16_w05 %in% 1:2,
labels = c('Satisfecho', 'Insatisfecho')),
# Sobrecarga de deudas
sobrecarga_deuda_w01 = factor(car::recode(m43_w01, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
sobrecarga_deuda_w03 = factor(car::recode(m43_w03, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
sobrecarga_deuda_w05 = factor(car::recode(m43_w05, "1 = 1; 2:3 = 2; 4:5 = 3; else = NA"),
labels = c('Nada sobrecargado', 'No muy o algo sobrecargado',
'Bastante o muy sobrecargado')),
# Apoyo social
apoyo_social_w01 = factor(s12_w01 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
apoyo_social_w03 = factor(s12_w03 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
apoyo_social_w05 = factor(s12_w05 %in% 4:5,
labels = c('Sin apoyo social', 'Con apoyo social')),
# Actividad física regular
activ_fisica_w01 = factor(s04_w01 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
activ_fisica_w03 = factor(s04_w03 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
activ_fisica_w05 = factor(s04_w05 %in% 1:3,
labels = c('Sin actividad física regular', 'Con actividad física regular')),
# Fumador
fuma_w01 = factor(s08_w01 >= 1,
labels = c('No fuma', 'Fumador')),
fuma_w03 = factor(s08_w03 >= 1,
labels = c('No fuma', 'Fumador')),
fuma_w05 = factor(s08_w05 >= 1,
labels = c('No fuma', 'Fumador')),
# IMC
imc_w01 = ifelse(is_nsnr(s06_w01), NA, s06_w01) / (ifelse(is_nsnr(s05_w01), NA, s05_w01/100))^2,
imc_w03 = ifelse(is_nsnr(s06_w03), NA, s06_w03) / (ifelse(is_nsnr(s05_w03), NA, s05_w03/100))^2,
imc_w05 = ifelse(is_nsnr(s06_w05), NA, s06_w05) / (ifelse(is_nsnr(s05_w03), NA, s05_w03/100))^2,
# Personalidad
s22_01_w02 = ifelse(is_nsnr(s22_01_w02), NA, s22_01_w02),
s22_02_w02 = ifelse(is_nsnr(s22_02_w02), NA, s22_02_w02),
s22_03_w02 = ifelse(is_nsnr(s22_03_w02), NA, s22_03_w02),
s22_04_w02 = ifelse(is_nsnr(s22_04_w02), NA, s22_04_w02),
s22_05_w02 = ifelse(is_nsnr(s22_05_w02), NA, s22_05_w02),
s22_06_w02 = ifelse(is_nsnr(s22_06_w02), NA, s22_06_w02),
s22_07_w02 = ifelse(is_nsnr(s22_07_w02), NA, s22_07_w02),
s22_08_w02 = ifelse(is_nsnr(s22_08_w02), NA, s22_08_w02),
s22_09_w02 = ifelse(is_nsnr(s22_09_w02), NA, s22_09_w02),
s22_10_w02 = ifelse(is_nsnr(s22_10_w02), NA, s22_10_w02),
extraversion = 6 - (s22_01_w02) + s22_06_w02 ,
agreeableness = s22_02_w02 + 6 - s22_07_w02,
conscientiousness = 6 - s22_03_w02 + s22_08_w02 ,
neuroticism = 6 - s22_04_w02 + s22_09_w02,
openness = 6 - s22_05_w02 + s22_10_w02,
# Direccion vida
proyecto_vida = factor(s30_01_w03 %in% 4:5,
labels = c('No decidido dirección de vida', 'Decidido dirección de vida')),
# Desigualdad percibida
percepcion_desigualdad_w01 = factor(c18_11_w01 %in% 4:5,
labels = c('Desigualdad no muy grande', 'Desigualdad muy grande')),
percepcion_desigualdad_w02 = factor(c18_11_w02 %in% 4:5,
labels = c('Desigualdad no muy grande', 'Desigualdad muy grande')),
percepcion_desigualdad_w03 = factor(c18_11_w03 %in% 4:5,
labels = c('Desigualdad no muy grande', 'Desigualdad muy grande')),
percepcion_desigualdad_w04 = factor(c18_11_w04 %in% 4:5,
labels = c('Desigualdad no muy grande', 'Desigualdad muy grande')),
percepcion_desigualdad_w05 = factor(c18_11_w05 %in% 4:5,
labels = c('Desigualdad no muy grande', 'Desigualdad muy grande')),
)
comparar_clusters(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'))
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 3)
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 4)
trayectoria(elsoc_salud_modelo,
vars = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
cpal = c('palegreen3', 'palevioletred3'),
K = 5)
# Agregar trayectoria de 3 clusters
seq <- TraMineR::seqdef(elsoc_salud_modelo,
var = c('percepcion_desigualdad_w01', 'percepcion_desigualdad_w02', 'percepcion_desigualdad_w03',
'percepcion_desigualdad_w04', 'percepcion_desigualdad_w05'),
weights = elsoc_salud_modelo$ponderador02_w01)
dist <- TraMineR::seqdist(seq,
method = "LCS",
with.missing = TRUE)
ward <- cluster::agnes(dist, diss = TRUE, method = 'ward')
elsoc_salud_modelo$trayectoria_activ_fisica <- factor(stats::cutree(ward, k = 3),
levels = c(3, 1, 2),
labels = c('Desigualdad muy grande',
'Desigualdad muy grande - No muy grande en 2021',
'Desigualdad no muy grande - muy grande en 2019-2021'))
elsoc_salud_modelo$trayectoria_percepcion_desigualdad <- factor(stats::cutree(ward, k = 3),
levels = c(3, 1, 2),
labels = c('Desigualdad muy grande',
'Desigualdad muy grande - No muy grande en 2021',
'Desigualdad no muy grande - muy grande en 2019-2021'))
# Agregar trayectoria de 3 clusters
seq <- TraMineR::seqdef(elsoc_salud_modelo,
var = c('activ_fisica_w01', 'activ_fisica_w03', 'activ_fisica_w05'),
weights = elsoc_salud_modelo$ponderador02_w01)
dist <- TraMineR::seqdist(seq,
method = "LCS",
with.missing = TRUE)
ward <- cluster::agnes(dist, diss = TRUE, method = 'ward')
elsoc_salud_modelo$trayectoria_activ_fisica <- factor(stats::cutree(ward, k = 4))
m1 <- elsoc_salud_modelo %>%
multinom(trayectoria_om4.4 ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_insatisf_ing + trayectoria_ocup2 + trayectoria_activ_fisica,
data = .)
summary(m1)
m2 <- elsoc_salud_modelo %>%
multinom(trayectoria_om4.4 ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_insatisf_ing + trayectoria_ocup2 + trayectoria_activ_fisica + fuma_w01 + imc_w01 + proyecto_vida + apoyo_social_w01,
data = .)
m3 <- elsoc_salud_modelo %>%
multinom(trayectoria_om4.4 ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_insatisf_ing + trayectoria_ocup2 + trayectoria_activ_fisica + fuma_w01 + imc_w01 + proyecto_vida + apoyo_social_w01 + extraversion + agreeableness + conscientiousness + neuroticism + openness,
data = .)
modelsummary::modelsummary(list(m1, m2, m3),
estimate = "{estimate}{stars}",
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
shape = term + response ~ model)
mf <- elsoc_salud_modelo %>%
multinom(trayectoria_gmm.5lin ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_percepcion_desigualdad + trayectoria_ocup2 + trayectoria_activ_fisica + fuma_w01 + imc_w01 + proyecto_vida + apoyo_social_w01 + extraversion + agreeableness + conscientiousness + neuroticism + openness,
data = .)
modelsummary::modelsummary(mf,
estimate = "{estimate}{stars}",
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
shape = term ~ response)
print('holi')
?multinom
View(m1)
View(m1)
View(mf)
with(elsoc_salud_modelo, table(trayectoria_om4.4))
table(elsoc_salud_modelo4$trayectoria_om4.4)
table(elsoc_salud_modelo4$trayectoria_om4.4)
table(elsoc_salud_modelo$trayectoria_om4.4)
sum(table(elsoc_salud_modelo$trayectoria_om4.4))
sum(table(elsoc_salud_modelo$trayectoria_om4.5))
sum(table(elsoc_salud_modelo$trayectoria_om4.5))
sum(table(elsoc_salud_modelo$trayectoria_gmm.4lin))
sum(table(elsoc_salud_modelo$trayectoria_gmm.5lin))
# Crear objeto con secuencias
seq.depr4 <- TraMineR::seqdef(elsoc_salud,
var = c('depr4_w01', 'depr4_w02', 'depr4_w03', 'depr4_w04', 'depr4_w05'),
states = c('Sin síntomas', 'Síntomas medios', 'Síntomas moderados', 'Síntomas severos'),
labels = c('Sin síntomas', 'Síntomas medios', 'Sintomas moderados', 'Síntomas severos'),
weights = elsoc_salud$ponderador02_w01,
cpal = c('lightgreen', 'mediumturquoise', 'skyblue3', 'slateblue4'))
# Crear objeto con secuencias
seq.depr4 <- TraMineR::seqdef(elsoc_salud,
var = c('depr4_w01', 'depr4_w02', 'depr4_w03', 'depr4_w04', 'depr4_w05'),
states = c('Sin síntomas', 'Síntomas medios', 'Síntomas moderados', 'Síntomas severos'),
labels = c('Sin síntomas', 'Síntomas medios', 'Sintomas moderados', 'Síntomas severos'),
weights = elsoc_salud$ponderador02_w01,
cpal = c('lightgreen', 'mediumturquoise', 'skyblue3', 'slateblue4'))
View(mf)
asd <- mf$fitted.values
View(asd)
View(mf)
m3 <- elsoc_salud_modelo %>%
multinom(trayectoria_gmm.5lin ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_percepcion_desigualdad + trayectoria_ocup2 + trayectoria_activ_fisica + fuma_w01 + imc_w01 + proyecto_vida + apoyo_social_w01 + extraversion + agreeableness + conscientiousness + neuroticism + openness,
data = ., weights = ponderador02_w01)
mf <- elsoc_salud_modelo %>%
multinom(trayectoria_gmm.5lin ~ m0_sexo_w01 + m0_edad_w01 + log_ing + trayectoria_deuda + trayectoria_ocup2 + trayectoria_activ_fisica + proyecto_vida + apoyo_social_w01 + extraversion + agreeableness + conscientiousness + neuroticism + openness,
data = ., weights = ponderador02_w01)
View(mf)
get_estimates(mf)
modelsummary::modelsummary(mf,
estimate = "{estimate}{stars}",
statistic = NULL,
stars = c('*' = .05, '**' = .01, '***' = .001),
shape = term ~ response,
exponentiate = TRUE)
library(elsoc)
library(tidyverse)
load_elsoc()
elsoc_long_2016_2021 %>%
filter(ola != 5) %>%
group_by(ola) %>%
summarise(n = n())
elsoc_long_2016_2021 %>%
filter(ola != 5, muestra == 1) %>%
group_by(ola) %>%
summarise(n = n())
sjmisc::frq(elsoc_wide_2016_2021$tipo_atricion)
devtools::install_github('edgardo-cerda/elsoc', force = TRUE)
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, cache = FALSE )
# Cargar datos ELSOC:
elsoc::load_elsoc(data = 'wide')
# Cargar datos ELSOC:
elsoc::load_elsoc(data = 'wide')
# Cargar datos ELSOC:
# elsoc::load_elsoc(data = 'wide')
load(file.path('..', 'ELSOC_Long_2016_2021_v1.00_R.RData'))
# Cargar datos ELSOC LONG:
# elsoc::load_elsoc(data = 'long')
load(file.path('..', 'ELSOC_Wide_2016_2021_v1.00_R.RData'))
